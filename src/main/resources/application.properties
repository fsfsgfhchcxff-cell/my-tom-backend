spring.application.name=tom-learning-app

# ======================================
# 智能数据库配置 (本地 H2 + 云端 PostgreSQL)
# ======================================

# --- 数据库连接 (智能检测) ---
# 本地开发：使用 H2 内存数据库
# 云端部署：使用环境变量 DATABASE_URL（Render自动注入）
spring.datasource.url=${DATABASE_URL:jdbc:h2:mem:testdb}
spring.datasource.username=${DB_USERNAME:sa}
spring.datasource.password=${DB_PASSWORD:}

# ⚠️ 重要：移除硬编码的驱动类名和方言
# Spring Boot 会根据 URL 自动选择正确的驱动和方言！
# 本地 → H2Driver + H2Dialect
# 云端 → PostgreSQLDriver + PostgreSQLDialect

# H2 控制台（仅本地开发可用）
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# --- JPA 配置 ---
# 数据库表结构管理策略
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# --- Web 配置 ---
# 确保404错误抛出异常（而不是返回HTML页面）
spring.mvc.throw-exception-if-no-handler-found=true
# 注意：不禁用静态资源映射，避免返回HTML错误页面
# spring.web.resources.add-mappings=false

# --- 服务器配置 ---
# 本地端口：8081
# 云端端口：由环境变量 PORT 决定（Render 会自动设置为 10000）
server.port=${PORT:8081}

# ======================================
# 云端配置说明
# ======================================
# Render 会自动注入以下环境变量：
# - DATABASE_URL: jdbc:postgresql://host/database
# - PORT: 10000
# 
# Spring Boot 会自动：
# 1. 检测 PostgreSQL URL
# 2. 加载 PostgreSQL 驱动
# 3. 使用 PostgreSQL 方言
#
# 无需手动指定驱动类名或方言！
