spring.application.name=tom-learning-app

# ======================================
# 智能数据库配置 (本地 H2 + 云端 PostgreSQL)
# ======================================

# --- 默认使用 H2 (本地开发) ---
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# H2 控制台（仅本地开发可用）
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# --- JPA 配置 ---
# 本地开发：create-drop（每次重启清空数据）
# 云端部署：update（保留数据，仅更新结构）
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# --- 服务器配置 ---
# 本地端口：8081
# 云端端口：由环境变量 PORT 决定（Render 会自动设置）
server.port=${PORT:8081}

# ======================================
# 云端配置说明
# ======================================
# Render 会自动注入以下环境变量：
# - DATABASE_URL: PostgreSQL 连接字符串
# - PORT: 服务端口
# 
# 当检测到 DATABASE_URL 时，Spring Boot 会自动：
# 1. 覆盖 spring.datasource.url
# 2. 使用 PostgreSQL 驱动
# 3. 切换到 PostgreSQL 方言
#
# 无需手动修改此文件！
