# ======================================
# 生产环境配置 (云端部署)
# ======================================
# 此文件用于云端部署（如 Render）
# 
# 使用方式：
# java -jar app.jar --spring.profiles.active=prod
# 或设置环境变量：SPRING_PROFILES_ACTIVE=prod

spring.application.name=tom-learning-app

# --- PostgreSQL 配置 (由环境变量提供) ---
# Render 会自动注入 DATABASE_URL
# 格式: postgres://user:password@host:port/database
spring.datasource.url=${DATABASE_URL}
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# --- JPA 生产环境配置 ---
# update: 保留现有数据，仅更新表结构
spring.jpa.hibernate.ddl-auto=update
# 关闭 SQL 日志（提升性能）
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# --- 服务器配置 ---
# 端口由 Render 环境变量 PORT 决定
server.port=${PORT:8080}

# --- 关闭 H2 控制台 (生产环境不需要) ---
spring.h2.console.enabled=false

# --- 安全配置 ---
# 生产环境建议启用 HTTPS
server.ssl.enabled=false

# --- 日志配置 ---
logging.level.root=INFO
logging.level.com.mytom=INFO
logging.level.org.springframework.web=INFO

# --- CORS 配置 (根据实际前端域名调整) ---
# 如果前端部署在 Vercel/Netlify，需要允许跨域
# 在 Controller 中已配置 @CrossOrigin，这里不再重复

# ======================================
# 环境变量说明
# ======================================
# 在 Render 控制台设置以下环境变量：
# 
# 必须：
# - DATABASE_URL: PostgreSQL 连接字符串 (Render 自动提供)
# - PORT: 服务端口 (Render 自动提供)
#
# 可选：
# - SPRING_PROFILES_ACTIVE: prod
# - JAVA_TOOL_OPTIONS: -Xmx512m (限制内存使用)

