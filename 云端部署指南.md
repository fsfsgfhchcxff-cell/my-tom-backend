# â˜ï¸ äº‘ç«¯éƒ¨ç½²æŒ‡å— - Render éƒ¨ç½²æ•™ç¨‹

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®ä½ æŠŠã€Œæ±¤å§†çŒ«å­¦ä¹ ç‰ˆã€éƒ¨ç½²åˆ° **Render**ï¼ˆå…è´¹äº‘å¹³å°ï¼‰ã€‚

**éƒ¨ç½²æ¶æ„ï¼š**
- ğŸ”µ **åç«¯**ï¼šRender Web Service (Spring Boot)
- ğŸŸ¢ **æ•°æ®åº“**ï¼šRender PostgreSQL (å…è´¹)
- ğŸ¨ **å‰ç«¯**ï¼šVercel / Netlify (å…è´¹)

---

## ğŸ¯ ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ GitHub ä»“åº“

### 1.1 æ¨é€åç«¯ä»£ç åˆ° GitHub

```bash
# è¿›å…¥åç«¯ç›®å½•
cd D:\å¤§ä¸‰ä¸Š\è½¯ä»¶å·¥ç¨‹è¯¾è®¾\tom-learning-app\tom-learning-app

# åˆå§‹åŒ–å¹¶æ¨é€
git init
git add .
git commit -m "ğŸš€ Initial commit: éƒ¨ç½²åˆ° Render"
git branch -M main
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/tom-learning-backend.git
git push -u origin main
```

æˆ–è€…**åŒå‡»è¿è¡Œ**ï¼š`Gitæ¨é€åç«¯.bat`

### 1.2 æ¨é€å‰ç«¯ä»£ç åˆ° GitHub

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd D:\å¤§ä¸‰ä¸Š\è½¯ä»¶å·¥ç¨‹è¯¾è®¾\tom-learning-app\frontend

# åˆå§‹åŒ–å¹¶æ¨é€
git init
git add .
git commit -m "ğŸ¨ Initial commit: éƒ¨ç½²åˆ° Vercel"
git branch -M main
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/tom-learning-frontend.git
git push -u origin main
```

æˆ–è€…**åŒå‡»è¿è¡Œ**ï¼š`Gitæ¨é€å‰ç«¯.bat`

---

## ğŸ”µ ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²åç«¯åˆ° Render

### 2.1 åˆ›å»º Render è´¦å·

1. è®¿é—®ï¼šhttps://render.com
2. ç‚¹å‡» "Get Started for Free"
3. ä½¿ç”¨ GitHub è´¦å·ç™»å½•ï¼ˆæ¨èï¼‰

### 2.2 åˆ›å»º PostgreSQL æ•°æ®åº“

1. åœ¨ Render Dashboard ç‚¹å‡» **"New +"** â†’ **"PostgreSQL"**

2. é…ç½®æ•°æ®åº“ï¼š
   - **Name**: `tom-learning-db`
   - **Database**: `tomdb`
   - **User**: `tomuser` (è‡ªåŠ¨ç”Ÿæˆ)
   - **Region**: é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„ (å¦‚ Singapore)
   - **Plan**: **Free** (å…è´¹å¥—é¤)

3. ç‚¹å‡» **"Create Database"**

4. â³ ç­‰å¾…æ•°æ®åº“åˆ›å»ºå®Œæˆï¼ˆçº¦1-2åˆ†é’Ÿï¼‰

5. âœ… å¤åˆ¶ **Internal Database URL**ï¼ˆç¨åè¦ç”¨ï¼‰
   - æ ¼å¼ï¼š`postgresql://user:password@host/database`

### 2.3 éƒ¨ç½² Spring Boot åº”ç”¨

1. åœ¨ Render Dashboard ç‚¹å‡» **"New +"** â†’ **"Web Service"**

2. è¿æ¥ GitHub ä»“åº“ï¼š
   - é€‰æ‹©ä½ çš„åç«¯ä»“åº“ï¼š`tom-learning-backend`
   - ç‚¹å‡» **"Connect"**

3. é…ç½® Web Serviceï¼š

   **Basic è®¾ç½®ï¼š**
   - **Name**: `tom-learning-backend`
   - **Region**: ä¸æ•°æ®åº“ç›¸åŒ
   - **Branch**: `main`
   - **Root Directory**: ç•™ç©ºï¼ˆå¦‚æœä»£ç åœ¨æ ¹ç›®å½•ï¼‰
   - **Runtime**: **Docker** æˆ– **Java**

   **æ–¹å¼Aï¼šä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰âœ¨**
   
   Render ä¼šè‡ªåŠ¨æ£€æµ‹ Dockerfile å¹¶æ„å»ºé•œåƒï¼š
   - **Build Command**: ç•™ç©ºï¼ˆè‡ªåŠ¨ä½¿ç”¨ Dockerfileï¼‰
   - **Start Command**: ç•™ç©ºï¼ˆä½¿ç”¨ Dockerfile çš„ ENTRYPOINTï¼‰
   
   **æ–¹å¼Bï¼šä½¿ç”¨ Maven**
   
   **Build å‘½ä»¤ï¼š**
   ```bash
   ./mvnw clean package -DskipTests
   ```

   **Start å‘½ä»¤ï¼š**
   ```bash
   java -Dserver.port=$PORT -jar target/tom-learning-app-0.0.1-SNAPSHOT.jar
   ```

   **Instance Typeï¼š**
   - é€‰æ‹© **Free** (å…è´¹)

4. **ç¯å¢ƒå˜é‡è®¾ç½®**ï¼š

   ç‚¹å‡» **"Advanced"** â†’ **"Add Environment Variable"**

   æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

   | Key | Value |
   |-----|-------|
   | `DATABASE_URL` | ç²˜è´´ä½ çš„ PostgreSQL Internal URL |
   | `SPRING_PROFILES_ACTIVE` | `prod` |
   | `JAVA_TOOL_OPTIONS` | `-Xmx512m` |

5. ç‚¹å‡» **"Create Web Service"**

6. â³ ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆé¦–æ¬¡éƒ¨ç½²çº¦5-10åˆ†é’Ÿï¼‰

7. âœ… éƒ¨ç½²æˆåŠŸåï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª URLï¼š
   ```
   https://tom-learning-backend.onrender.com
   ```

### 2.4 æµ‹è¯•åç«¯ API

è®¿é—®ä»¥ä¸‹åœ°å€æµ‹è¯•ï¼š

```
https://tom-learning-backend.onrender.com/api/game/ping
```

åº”è¯¥çœ‹åˆ°ï¼š
```json
{
  "status": "ok",
  "message": "æ¸¸æˆæœåŠ¡è¿è¡Œæ­£å¸¸ï¼ğŸ®"
}
```

---

## ğŸ¨ ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel

### 3.1 åˆ›å»º Vercel è´¦å·

1. è®¿é—®ï¼šhttps://vercel.com
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•

### 3.2 éƒ¨ç½²å‰ç«¯

1. ç‚¹å‡» **"Add New..."** â†’ **"Project"**

2. å¯¼å…¥ GitHub ä»“åº“ï¼š
   - é€‰æ‹© `tom-learning-frontend`
   - ç‚¹å‡» **"Import"**

3. é…ç½®é¡¹ç›®ï¼š

   **Framework Preset**: React

   **Root Directory**: `./` (ä¿æŒé»˜è®¤)

   **Build Command**:
   ```bash
   npm run build
   ```

   **Output Directory**:
   ```
   build
   ```

   **Install Command**:
   ```bash
   npm install
   ```

4. **ç¯å¢ƒå˜é‡è®¾ç½®**ï¼š

   ç‚¹å‡» **"Environment Variables"**

   æ·»åŠ ï¼š

   | Name | Value |
   |------|-------|
   | `REACT_APP_API_URL` | `https://tom-learning-backend.onrender.com` |

5. ç‚¹å‡» **"Deploy"**

6. â³ ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦2-3åˆ†é’Ÿï¼‰

7. âœ… éƒ¨ç½²æˆåŠŸåï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª URLï¼š
   ```
   https://tom-learning-frontend.vercel.app
   ```

### 3.3 ä¿®æ”¹å‰ç«¯ API é…ç½®

éƒ¨ç½²åéœ€è¦æ›´æ–°å‰ç«¯çš„ API åœ°å€ï¼š

**ä¿®æ”¹ `frontend/package.json`ï¼š**

åˆ é™¤æˆ–æ³¨é‡Šæ‰ï¼š
```json
"proxy": "http://localhost:8081"
```

**ä¿®æ”¹æ‰€æœ‰ç»„ä»¶ä¸­çš„ fetch è°ƒç”¨ï¼š**

```javascript
// ä¹‹å‰ï¼ˆæœ¬åœ°å¼€å‘ï¼‰
fetch('/api/game/home/1')

// ä¿®æ”¹ä¸ºï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
const API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:8081';
fetch(`${API_BASE}/api/game/home/1`)
```

æˆ–è€…åˆ›å»ºä¸€ä¸ª `api.js` é…ç½®æ–‡ä»¶ï¼š

```javascript
// src/config/api.js
const API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:8081';
export default API_BASE;
```

ç„¶ååœ¨ç»„ä»¶ä¸­ï¼š
```javascript
import API_BASE from './config/api';
fetch(`${API_BASE}/api/game/home/1`)
```

**æäº¤å¹¶æ¨é€æ›´æ”¹ï¼š**
```bash
git add .
git commit -m "ğŸ”§ é…ç½®ç”Ÿäº§ç¯å¢ƒ API åœ°å€"
git push
```

Vercel ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚

---

## ğŸ”§ ç¬¬å››æ­¥ï¼šé…ç½® CORSï¼ˆé‡è¦ï¼‰

åç«¯éœ€è¦å…è®¸å‰ç«¯åŸŸåçš„è·¨åŸŸè¯·æ±‚ã€‚

**ä¿®æ”¹æ‰€æœ‰ Controller çš„ `@CrossOrigin`ï¼š**

```java
@CrossOrigin(origins = {
    "http://localhost:3000",  // æœ¬åœ°å¼€å‘
    "https://tom-learning-frontend.vercel.app"  // ç”Ÿäº§ç¯å¢ƒ
})
```

æˆ–è€…åˆ›å»ºå…¨å±€é…ç½®ï¼š

```java
// src/main/java/com/mytom/tom_learning_app/config/CorsConfig.java
@Configuration
public class CorsConfig {
    @Bean
    public WebMvcConfigurer corsConfigurer() {
        return new WebMvcConfigurer() {
            @Override
            public void addCorsMappings(CorsRegistry registry) {
                registry.addMapping("/api/**")
                    .allowedOrigins(
                        "http://localhost:3000",
                        "https://tom-learning-frontend.vercel.app"
                    )
                    .allowedMethods("GET", "POST", "PUT", "DELETE")
                    .allowCredentials(true);
            }
        };
    }
}
```

**æ¨é€æ›´æ–°ï¼š**
```bash
git add .
git commit -m "ğŸ”§ é…ç½® CORS å…è®¸å‰ç«¯è®¿é—®"
git push
```

Render ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚

---

## âœ… ç¬¬äº”æ­¥ï¼šéªŒè¯éƒ¨ç½²

### 5.1 æµ‹è¯•åç«¯

```bash
# æµ‹è¯• Ping
curl https://tom-learning-backend.onrender.com/api/game/ping

# æµ‹è¯•è·å–ç”¨æˆ·æ•°æ®
curl https://tom-learning-backend.onrender.com/api/game/home/1

# æµ‹è¯•è·å–å•†å“åˆ—è¡¨
curl https://tom-learning-backend.onrender.com/api/items
```

### 5.2 æµ‹è¯•å‰ç«¯

1. è®¿é—®ï¼š`https://tom-learning-frontend.vercel.app`
2. æ³¨å†Œ/ç™»å½•
3. ç‚¹å‡»"æµ‹è¯•"æŒ‰é’®
4. ç‚¹å‡»"å¼€å§‹æµ‹è¯•"
5. æŸ¥çœ‹æ‰€æœ‰æµ‹è¯•æ˜¯å¦é€šè¿‡ âœ…

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### Render åç«¯æ—¥å¿—

1. è¿›å…¥ Render Dashboard
2. ç‚¹å‡»ä½ çš„ Web Service
3. ç‚¹å‡» **"Logs"** æ ‡ç­¾
4. å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—

### Vercel å‰ç«¯æ—¥å¿—

1. è¿›å…¥ Vercel Dashboard
2. ç‚¹å‡»ä½ çš„é¡¹ç›®
3. ç‚¹å‡» **"Deployments"**
4. æŸ¥çœ‹æ„å»ºæ—¥å¿—

---

## ğŸ”„ æŒç»­éƒ¨ç½²

### è‡ªåŠ¨éƒ¨ç½²è®¾ç½®

âœ… **å·²é…ç½®ï¼** Render å’Œ Vercel éƒ½å·²å¯ç”¨è‡ªåŠ¨éƒ¨ç½²ï¼š

- æ¨é€åˆ° `main` åˆ†æ”¯ â†’ è‡ªåŠ¨éƒ¨ç½²
- æäº¤ä»£ç  â†’ ç­‰å¾…å‡ åˆ†é’Ÿ â†’ æ–°ç‰ˆæœ¬ä¸Šçº¿

### æ‰‹åŠ¨è§¦å‘éƒ¨ç½²

**Renderï¼ˆåç«¯ï¼‰ï¼š**
1. Dashboard â†’ ä½ çš„ Service
2. ç‚¹å‡» **"Manual Deploy"** â†’ **"Deploy latest commit"**

**Vercelï¼ˆå‰ç«¯ï¼‰ï¼š**
1. Dashboard â†’ ä½ çš„ Project
2. ç‚¹å‡» **"Deployments"**
3. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½² â†’ **"Redeploy"**

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### Render å…è´¹å¥—é¤é™åˆ¶

- âœ… **PostgreSQL**: 1 GB å­˜å‚¨ï¼Œè¶³å¤Ÿä¸ªäººé¡¹ç›®
- âœ… **Web Service**: 
  - 512 MB RAM
  - è‡ªåŠ¨ä¼‘çœ ï¼ˆ15åˆ†é’Ÿæ— è¯·æ±‚åä¼‘çœ ï¼‰
  - é¦–æ¬¡è¯·æ±‚å¯èƒ½éœ€è¦ç­‰å¾…30ç§’å”¤é†’
  - æ¯æœˆ 750 å°æ—¶å…è´¹

### Vercel å…è´¹å¥—é¤

- âœ… æ— é™æ¬¡éƒ¨ç½²
- âœ… 100 GB å¸¦å®½/æœˆ
- âœ… è‡ªåŠ¨ HTTPS
- âœ… å…¨çƒ CDN

**ç»“è®ºï¼šå®Œå…¨å…è´¹ï¼** ğŸ‰

---

## ğŸš¨ å¸¸è§é—®é¢˜

### é—®é¢˜1: åç«¯éƒ¨ç½²å¤±è´¥

**é”™è¯¯**: `BUILD FAILED`

**åŸå› **: Maven æ„å»ºå¤±è´¥

**è§£å†³**:
1. æ£€æŸ¥ `pom.xml` æ˜¯å¦æ­£ç¡®
2. ç¡®ä¿ Java ç‰ˆæœ¬ä¸º 21
3. æŸ¥çœ‹æ„å»ºæ—¥å¿—å®šä½é”™è¯¯
4. æœ¬åœ°æµ‹è¯•ï¼š`mvnw clean package`

---

### é—®é¢˜2: æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯**: `Unable to connect to database`

**åŸå› **: ç¯å¢ƒå˜é‡é…ç½®é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥ `DATABASE_URL` æ˜¯å¦æ­£ç¡®
2. ç¡®ä¿ä½¿ç”¨ **Internal Database URL**ï¼ˆä¸æ˜¯ Externalï¼‰
3. æ ¼å¼ï¼š`postgresql://user:password@host/database`
4. é‡æ–°éƒ¨ç½²æœåŠ¡

---

### é—®é¢˜3: å‰ç«¯æ— æ³•è¿æ¥åç«¯

**é”™è¯¯**: `ERR_CONNECTION_REFUSED` æˆ– CORS é”™è¯¯

**åŸå› **: CORS é…ç½®æˆ– API åœ°å€é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥åç«¯ `@CrossOrigin` æ˜¯å¦åŒ…å«å‰ç«¯åŸŸå
2. æ£€æŸ¥å‰ç«¯ `REACT_APP_API_URL` ç¯å¢ƒå˜é‡
3. ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

### é—®é¢˜4: åç«¯è‡ªåŠ¨ä¼‘çœ 

**ç°è±¡**: é¦–æ¬¡è¯·æ±‚å¾ˆæ…¢ï¼ˆ30ç§’ï¼‰

**åŸå› **: Render å…è´¹å¥—é¤ä¼šè‡ªåŠ¨ä¼‘çœ 

**è§£å†³æ–¹æ¡ˆ**:

A. **æ¥å—ä¼‘çœ **ï¼ˆæ¨èï¼‰
   - ç­‰å¾…30ç§’å³å¯

B. **ä½¿ç”¨ Uptime Monitor**ï¼ˆä¿æŒå”¤é†’ï¼‰
   - ä½¿ç”¨ UptimeRobot æ¯5åˆ†é’Ÿ ping ä¸€æ¬¡
   - ç½‘å€ï¼šhttps://uptimerobot.com
   - å…è´¹å¥—é¤è¶³å¤Ÿä½¿ç”¨

C. **å‡çº§åˆ°ä»˜è´¹å¥—é¤**
   - $7/æœˆï¼Œä¸ä¼šä¼‘çœ 

---

### é—®é¢˜5: å‰ç«¯æ„å»ºå¤±è´¥

**é”™è¯¯**: `Module not found`

**åŸå› **: ä¾èµ–æœªå®‰è£…

**è§£å†³**:
```bash
# æœ¬åœ°æµ‹è¯•æ„å»º
npm install
npm run build

# å¦‚æœæˆåŠŸï¼Œæäº¤å¹¶æ¨é€
git add .
git commit -m "ğŸ› ä¿®å¤ä¾èµ–é—®é¢˜"
git push
```

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### 1. æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹

```java
@GetMapping("/health")
public ResponseEntity<String> health() {
    return ResponseEntity.ok("OK");
}
```

### 2. é…ç½®è‡ªå®šä¹‰åŸŸå

**Renderï¼ˆåç«¯ï¼‰:**
1. Settings â†’ Custom Domain
2. æ·»åŠ ä½ çš„åŸŸå
3. é…ç½® DNS CNAME è®°å½•

**Vercelï¼ˆå‰ç«¯ï¼‰:**
1. Settings â†’ Domains
2. æ·»åŠ ä½ çš„åŸŸå
3. é…ç½® DNS

### 3. å¯ç”¨ HTTPSï¼ˆè‡ªåŠ¨ï¼‰

Render å’Œ Vercel éƒ½è‡ªåŠ¨æä¾› HTTPS è¯ä¹¦ âœ…

### 4. è®¾ç½®ç¯å¢ƒå˜é‡ä¿æŠ¤

ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ï¼š
- æ•°æ®åº“å¯†ç 
- API å¯†é’¥
- JWT å¯†é’¥

å…¨éƒ¨ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **Render å®˜æ–¹æ–‡æ¡£**: https://render.com/docs
- **Vercel å®˜æ–¹æ–‡æ¡£**: https://vercel.com/docs
- **Spring Boot éƒ¨ç½²æŒ‡å—**: https://spring.io/guides/gs/spring-boot/
- **React ç”Ÿäº§ç¯å¢ƒæ„å»º**: https://create-react-app.dev/docs/production-build/

---

## ğŸ‰ å®Œæˆï¼

æ­å–œä½ æˆåŠŸéƒ¨ç½²äº†æ±¤å§†çŒ«å­¦ä¹ ç‰ˆåˆ°äº‘ç«¯ï¼

**è®¿é—®åœ°å€ï¼š**
- ğŸ¨ **å‰ç«¯**: https://tom-learning-frontend.vercel.app
- ğŸ”µ **åç«¯**: https://tom-learning-backend.onrender.com
- ğŸ’¾ **æ•°æ®åº“**: PostgreSQL (å·²è‡ªåŠ¨é…ç½®)

**åˆ†äº«ç»™æœ‹å‹å§ï¼** ğŸŠ

---

æœ‰ä»»ä½•é—®é¢˜éšæ—¶æŸ¥çœ‹ Render å’Œ Vercel çš„æ—¥å¿—ï¼Œæˆ–è€…å‚è€ƒä¸Šé¢çš„å¸¸è§é—®é¢˜ï¼

